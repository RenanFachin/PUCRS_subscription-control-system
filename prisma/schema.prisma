generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Aplicativo {
  codigo      String       @id @default(uuid())
  nome        String
  custoMensal Float @map("custo_mensal")
  assinaturas Assinatura[]

  @@map("aplicativos")
}

model Cliente {
  codigo      String       @id @default(uuid())
  nome        String
  email       String       @unique
  assinaturas Assinatura[]

  @@map("clientes")
}

model Assinatura {
  codigo         String    @id @default(uuid())
  inicioVigencia DateTime  @default(now()) @map("inicio_vigencia")
  fimVigencia    DateTime? @map("fim_vigencia")

  aplicativo Aplicativo @relation(fields: [codApp], references: [codigo])
  cliente    Cliente    @relation(fields: [codCli], references: [codigo])

  codApp String
  codCli String

  @@map("assinaturas")
}
